{% extends "base.html" %}

{% block title %}Movie Search{% endblock %}

{% block content %}

<div style="width: 100%; overflow: hidden; margin-bottom: 25px;">
    <img src="{{ url_for('static', filename='images/banner.jpg') }}"
         alt="Movie banner"
         style="width: 100%; height: 220px; object-fit: cover; border-radius: 8px;">
</div>

<div style="background: #111; color: #eee; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
    <h3 style="margin: 0; font-size: 1.4rem;"> Search and get some snacks, only all-time greats here üçø </h3>
    <p style="margin-top: 8px; line-height: 1.5;">
        Find a film to fall in love with. All movies can be found by actor, genre, year, rating, or title.
    </p>
</div>

<section class="mm-hero">
  <div class="mm-hero-text">
    <h1>Find your perfect movie</h1>
        <p> Type your keyword and find yourself the movie you've been looking for.
        Don't spend time searching anywhere else, get immediate results. <p>
        <p> <br> <p>
      <p> Created by: Dean, Devon, and Evan <p>
      <p> Saddleback College Coding Community
    </p>
  </div>

  <form method="post" class="mm-form">
    <label for="field" class="mm-label">Search by</label>
    <select id="field" name="field" class="mm-select">
      {% for key, label in fields.items() %}
      <option value="{{ key }}" {% if key == selected_field %}selected{% endif %}>
        {{ label }}
      </option>
      {% endfor %}
    </select>

    <label for="query" class="mm-label" style="margin-top: 0.75rem;">Search term</label>
    <input
      id="query"
      name="query"
      type="text"
      class="mm-select"
      placeholder="e.g. Gyllenhaal, Drama, 2007, Zodiac..."
      value="{{ query }}"
      required
    >

    <button type="submit" class="mm-button" style="margin-top: 0.9rem;">
      üîç Search
    </button>
  </form>
</section>

<section class="mm-results">
  {% if results %}
    <div class="mm-results-header">
      <h2>Found {{ results|length }} movies that had what your were looking for!</h2>
    </div>

    <div class="mm-movie-grid">
      {% for movie in results %}
      <article class="mm-movie-card">
        <h2>{{ movie.title }}</h2>
        <p class="mm-movie-meta">
          {% if movie.year %}<span class="mm-pill">{{ movie.year }}</span>{% endif %}
          {% if movie.rating is not none %}<span class="mm-pill">Rating: {{ movie.rating }}</span>{% endif %}
          <span class="mm-pill">{{ movie.genre }}</span>
          <span class="mm-pill">{{ movie.alt_genre }}</span>
        </p>
        <p class="mm-movie-blurb">
          <strong>Lead:</strong> {{ movie.lead }}<br>
          <strong>Support:</strong> {{ movie.support }}
        </p>
        <p class="mm-movie-blurb">
          {{ movie.description }}
        </p>
      </article>
      {% endfor %}
    </div>
  {% elif query %}
    <p class="mm-empty">
      There were no matches for "<strong>{{ query }}</strong>" in {{ fields[selected_field] }}.
      Try a shorter word or a different field.
    </p>
  {% endif %}
</section>
<div style="display: flex; gap: 15px; margin-top: 20px; justify-content: center;">
    <img src="{{ url_for('static', filename='images/poster1.jpg') }}"
         alt="Poster 1"
         style="width: 120px; height: 180px; object-fit: cover; border-radius: 6px;">

    <img src="{{ url_for('static', filename='images/poster2.jpg') }}"
         alt="Poster 2"
         style="width: 120px; height: 180px; object-fit: cover; border-radius: 6px;">
</div>

<h2 style="text-align:center; margin-top: 10px; font-size: 1.3rem; color:#444;">
    Feeling like you need something different? This can find hundreds of old-school films  üé¨
</h2>
{% endblock %}